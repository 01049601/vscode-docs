---
Order: 73
TOCTitle: January 2022
PageTitle: Visual Studio Code January 2022
MetaDescription: Learn what is new in the Visual Studio Code January 2022 Release (1.64)
MetaSocialImage: 1_64/release-highlights.png
Date: 2022-2-2
DownloadVersion: 1.64.0
---
# January 2022 (version 1.64)

<!-- DOWNLOAD_LINKS_PLACEHOLDER -->

Welcome to the Insiders build. These are the preliminary notes for the January 1.64 release of Visual Studio Code. As we get closer to the release date, you'll find details below about new features and important fixes.

Until the January milestone release notes are available, you can still track our progress:

* **[January iteration plan](https://github.com/microsoft/vscode/issues/139607)** - Review what's planned for the milestone.
* **[Commit log](https://github.com/Microsoft/vscode/commits/main)** - GitHub commits to the vscode open-source repository.
* **[Closed issues](https://github.com/Microsoft/vscode/issues?q=is%3Aissue+milestone%3A%22January+2022%22+is%3Aclosed)** - Resolved bugs and implemented feature requests in the milestone.

We really appreciate people trying our new features as soon as they are ready, so check back here often and learn what's new.

If you find issues or have suggestions, you can enter them in the [VS Code repository](https://github.com/Microsoft/vscode/issues) on GitHub.

<!-- In-product release notes styles.  Do not modify without also modifying regex in gulpfile.common.js -->
<a id="scroll-to-top" role="button" title="Scroll to top" aria-label="scroll to top" href="#"><span class="icon"></span></a>
<link rel="stylesheet" type="text/css" href="css/inproduct_releasenotes.css"/>

## Workbench

### Settings editor

The Settings editor search now looks for string value matches in string and enum settings when searching.

![Settings editor pulling up results where the enum value matches the query](images/1_64/settings-editor-search-by-value.png)

The new search algorithm also prioritizes whole word matches, which means that if one has both the Java and JavaScript extensions, the Java settings will show up first when searching "java".

![Settings editor search showing Java results before JavaScript ones when searching "java"](images/1_64/settings-editor-search-java-first.png)

Setting enum dropdowns also now work with touchscreen devices.

## Terminal

### Auto replies

The terminal is now able to automatically reply when a specific sequences of characters is received. A good example of where this is useful, which is also the only default case, is the Windows batch script message `Terminate batch job (Y/N)?` after hitting ctrl+c when running a batch script. This typically just ends up causing problems for the user. The terminal will now automatically reply with `Y` and enter (`\r`) which makes ctrl+c in Windows feel much better.

![Pressing ctrl+c will immediately reply to the question and return to the prompt](images/1_64/terminal-auto-reply.gif)

*Theme: [Sapphire](https://marketplace.visualstudio.com/items?itemName=Tyriar.theme-sapphire)*

The feature was made generically so you can setup custom replies for other thing, just be careful when doing this as you are sending text to the process automatically. For example you could use it to automatically update Oh My Zsh when prompted:

```json
"terminal.integrated.autoReplies": {
  "[Oh My Zsh] Would you like to check for updates? [Y/n]": "Y\r"
}
```

If you use Clink and enable their similar feature, you can disable it in Clink or in VS Code by setting the reply to `null` to avoid the two features conflicting with each other:

```json
"terminal.integrated.autoReplies": {
  "Terminate batch job (Y/N)": null
}
```

### Enhanced VT support

Support for OSC 4/10/11/12 escape sequences were added which enables applications to control the terminal's theme colors.

## Contributions to extensions

### Python

**Improved interpreter quickpicker**

In order to make it easier to select the desired interpreter, the Python extension now groups interpreters in the interpreter picker.

<img src="images/1_64/interpreter_picker.png" width=500 alt="Interpreters grouped in interpreter picker"/>

Note we're also experimenting with moving the active/selected interpreter in the status bar towards the right possibly inside the language status, so check out the `"Python"` status in the right side in case it isn't visible.

## Preview features

### Terminal shell integration

The terminal now features experimental opt-in shell integration, this feature allows VS Code to gain insights on what is going on within the terminal which was previously a black box. When enabled using `"terminal.integrated.enableShellIntegration": true`, arguments to run a shell integration script will be injected into your terminal profile if possible. The script itself mostly just injects invisible sequences into your prompt, providing us with information like where the prompt, command and command output is, what the current working directory (cwd) is for each command and the exit code of each command.

Using this information we can enhance existing features in various ways:

- Detect the cwd very quickly, previously this was only possible on macOS and linux and would launch processes or prod the file system to get at that information. Now it even works on Windows. The cwd is used in features like link detection and inheriting the cwd when splitting a terminal tab
- Improve the command tracking feature. This feature existed beforehand but only had default keybindings on macOS (cmd+up/down) and used a naive approach of guessed where lines were based on when enter was pressed.

Shell integration enables the following new features:

- Run recent command: Since we know what commands are run, we have exposed a command that allows you to view and run them again in a quick pick.
  TODO@Tyriar image
- Go to recent directory: Similar to the above, we also allow navigating to past directories.
  TODO@Tyriar image

The goal is to turn shell integration on by default when reliability of the feature is good. The approach we're taking with regards to argument injection is to be as unintrusive as possible. For example, we do not modify your shell initialization scripts automatically like some terminals but instead intercept the creation of the process, inspect the arguments and if are confident the shell can have shell integration run with those arguments we will inject them. The hope is to make it work well without any configuration required by the user, and to not interfere with your existing shell settings.

The current shells supported are pwsh for Windows and pwsh, bash and zsh for Linux and macOS.

As mentioned previously this is an experimental feature that is a little rough around the edges, here are some known issues:

- `$PS2` line continuations aren't supported yet, line continuations do work in pwsh though
- Right prompts aren't supported yet
- The zsh script is known to [not activate sometimes](https://github.com/microsoft/vscode/issues/141620)

## Extension authoring

### `vscode.workspace.createFileSystemWatcher` supports any path now

The existing `vscode.workspace.createFileSystemWatcher` API was improved to allowing you to pass in any file or folder path for file watching that is outside of the workspace. Previously the file watcher was limited to the opened folders in the workspace.

Depending on the glob pattern you pass into the method, the watcher will either be recursive (e.g. `**/*.js`) or non-recursive (`*.js`). Recursive watchers require more resources, so we recommend to use simple glob patterns only if possible.

Example:
```ts
// Watch a folder non-recursively
vscode.workspace.createFileSystemWatcher(new vscode.RelativePattern(vscode.Uri.file(<path to folder outside workspace>), '*.js'));

// Watch the active text editor file
vscode.workspace.createFileSystemWatcher(new vscode.RelativePattern(vscode.window.activeTextEditor.document.uri, '*'));
```

**Note:** as part of this change, we pushed a behavioural change for existing file watchers. A file watcher that is instructed with just a glob pattern (e.g. `vscode.workspace.createFileSystemWatcher('**')`) will no longer receive events for files that changed outside of the workspace. It will only receive file events from paths that are inside the workspace. If the user has opened no workspace, no event will be delivered via this method anymore. This was done to ensure that extensions do not receive unexpected events from outside the workspace.


### Cancellation token for onWill-events

The API exposes events to participate in file operations, like [`onWillRenameFiles`](https://github.com/microsoft/vscode/blob/f30dba54302d2c00356e90604ec27aceeeb38bb5/src/vscode-dts/vscode.d.ts#L11375). This partcipation can be long-running and therefore users can cancel it. With this release  user-side cancellation can be observed by extensions via a cancellation token on the corresponding event, for example [`FileWillRenameEvent#token`](https://github.com/microsoft/vscode/blob/f30dba54302d2c00356e90604ec27aceeeb38bb5/src/vscode-dts/vscode.d.ts#L10738). This allows extension to cancel expensive downlevel operations as well.

## Proposed extension APIs

Every milestone comes with new proposed APIs and extension authors can try them out. As always, we want your feedback. Here are the steps to try out a proposed API:

1. [Find a proposal that you want to try](https://github.com/microsoft/vscode/tree/main/src/vscode-dts) and add its name to `package.json#enabledApiProposals`.
1. Use the latest [vscode-dts](https://www.npmjs.com/package/vscode-dts) and run `vscode-dts dev`. It will download the corresponding `d.ts` files into your workspace.
1. You can now program against the proposal.

You cannot publish an extension that uses a proposed API. There may be breaking changes in the next release and we never want to break existing extensions.

### Inlay hint API is nearing its completion

This is shout to everyone that's interested in the inlay hints API. It is nearing completion and has been added enriched with support for interactive label parts. Those allow to bind a source code location to hints which in return enables feature like code navigation. Also, commands are now supported. The latest state and development of this proposal is here: [vscode.proposed.inlayHints.d.ts](https://github.com/microsoft/vscode/blob/main/src/vscode-dts/vscode.proposed.inlayHints.d.ts)

### Language status API is nearing its completion

The langauge status item API is planned for finalization. Please try it out and provide feedback for [vscode.proposed.languageStatus.d.ts](https://github.com/microsoft/vscode/blob/main/src/vscode-dts/vscode.proposed.languageStatus.d.ts)

## Engineering

### `vscode-bisect` tool

A new tool for bisecting released VSCode insider versions (web and desktop) is out to help diagnose issues:

```sh
npx vscode-bisect
```

![VSCode bisect tool](images/1_64/vscode-bisect.gif)

Similar to what `git bisect` offers, `vscode-bisect` will launch a range of released insider builds from the past asking whether the build reproduces the issue or not. The end result is a range of commits that introduced the issue. The instance will use a dedicated fresh folder for user data to not impact your main development environment.

## Notable fixes

* [117648](https://github.com/microsoft/vscode/issues/117648) The result when "gtc" is expanded with emmet with the extension sass is strange.
* [135677](https://github.com/microsoft/vscode/issues/135677) Hoving over setting UI links shows # at the start
* [138072](https://github.com/microsoft/vscode/issues/138072) Store recently opened workspaces in global storage
* [138805](https://github.com/microsoft/vscode/issues/138805) Opening large binary files reads full contents
* [138850](https://github.com/microsoft/vscode/issues/138850) Opened editor can end up empty after a file change on disk
* [140059](https://github.com/microsoft/vscode/issues/140059) VS Code core should not contain click here links
* [140129](https://github.com/microsoft/vscode/issues/140129) Double clicking on settings.json file results in new tabs each time
